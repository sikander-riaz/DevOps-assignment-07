---
- name: Check if docker-compose is already installed
  command: docker-compose --version
  register: docker_compose_check
  failed_when: false
  changed_when: false

- name: Install Docker Compose (standalone)
  get_url:
    url: "https://github.com/docker/compose/releases/download/v2.24.0/docker-compose-linux-x86_64"
    dest: /usr/local/bin/docker-compose
    mode: "0755"
    owner: root
    group: root
  become: true
  when: docker_compose_check.rc != 0

- name: Create symbolic link for docker-compose
  file:
    src: /usr/local/bin/docker-compose
    dest: /usr/bin/docker-compose
    state: link
  become: true
  when: docker_compose_check.rc != 0

- name: Verify Docker Compose installation
  command: docker-compose --version
  register: compose_version
  changed_when: false

- name: Display Docker Compose version
  debug:
    msg: "Docker Compose version: {{ compose_version.stdout }}"
